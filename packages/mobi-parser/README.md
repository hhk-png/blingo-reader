the internal logic refer to https://github.com/johnfactotum/foliate-js/blob/main/mobi.js
